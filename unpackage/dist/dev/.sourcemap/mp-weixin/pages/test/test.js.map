{"version":3,"sources":["uni-app:///main.js","webpack:///D:/此心安处是吾乡/xinan-front-end/pages/test/test.vue?4891","webpack:///D:/此心安处是吾乡/xinan-front-end/pages/test/test.vue?cd9b","webpack:///D:/此心安处是吾乡/xinan-front-end/pages/test/test.vue?ccac","webpack:///D:/此心安处是吾乡/xinan-front-end/pages/test/test.vue?a36d","uni-app:///pages/test/test.vue","webpack:///D:/此心安处是吾乡/xinan-front-end/pages/test/test.vue?2fb4","webpack:///D:/此心安处是吾乡/xinan-front-end/pages/test/test.vue?00d9"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","props","containerSize","type","default","wdith","height","controlsSize","width","controlsList","data","controlsArray","maxWidthCount","margin","margin_x","margin_y","recordInitControlsPoisitonList","controlsPositionArray","recordPosition","x","y","recordControlsPositionItem","curretnControlsIndex","mounted","methods","initControlsPosition","tempArray","left","top","handleTouchmove","event","pageX","pageY","handleTouchstart","handleTouchend","_handleChangeControlsPosition"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAimB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBCuBrnB;EACAC;IACA;IACAC;MACAC;MACAC;QAAA;UACAC;UACAC;QACA;MAAA;IACA;IACA;IACAC;MACAJ;MACAC;QAAA;UACAI;UACAF;QACA;MAAA;IACA;IACA;IACAG;MACAN;MACAC;QAAA;MAAA;IACA;EACA;EACAM;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACA;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;;IAEA;IACA;EACA;EACAC;IACA,iBACAC;MACA;MACA;;MAEA;MACA;QACAC;UACAC;UACAC;QACA;MACA;;MAEA;MACA;MACA;MACA;IACA;IAEA,gBACAC;MACA,sBAGAC;QAFAC;QACAC;;MAGA;MACA;QACAL;QACAC;MACA;MACA;MACA;QACAT;QACAC;MACA;MACA;MACA;MACA,2EACA,4DACA;QACA;QACA;MACA;MACA;MAAA,KACA,uCACA,4DACA;QACA;QACA;MACA;IACA;IAEA,iBACAa;MACA,uBAGAH;QAFAC;QACAC;;MAGA;MACA;MACA;QACAb;QACAC;MACA;MACA;IACA;IAEA,eACAc;MACA;MACA,iGACAZ;MACA;IACA;IAEA;AACA;AACA;AACA;IACAa;MACA;MACA;;MAEA;MACA;MACA;MACA;;MAEA;MACA;MACA;;MAEA;MACA;;MAEA;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACxLA;AAAA;AAAA;AAAA;AAAoqC,CAAgB,qnCAAG,EAAC,C;;;;;;;;;;;ACAxrC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/test/test.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/test/test.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./test.vue?vue&type=template&id=3e202046&scoped=true&\"\nvar renderjs\nimport script from \"./test.vue?vue&type=script&lang=js&\"\nexport * from \"./test.vue?vue&type=script&lang=js&\"\nimport style0 from \"./test.vue?vue&type=style&index=0&id=3e202046&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e202046\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/test/test.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test.vue?vue&type=template&id=3e202046&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var s0 = _vm.__get_style([_vm.containerSize])\n  var g0 = _vm.controlsPositionArray.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        s0: s0,\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"drag-and-drop-sort-B\" :style=\"[containerSize]\">\r\n\t\t<template v-if=\"controlsPositionArray.length !== 0\">\r\n\t\t\t<view v-for=\"(item, index) in controlsArray\" :key=\"index\" class=\"_item\" :style=\"{\r\n\t\t\t\t'background': item, 'transition': (curretnControlsIndex === index ? 'initial' : '.1s'), \r\n\t\t\t\t'z-index': (curretnControlsIndex === index ? 1 : 0), \r\n\t\t\t\t'width': controlsSize.width + 'px',\r\n\t\t\t\t 'height': controlsSize.height + 'px',\r\n\t\t\t\t  'top': controlsPositionArray[index].top + 'px'}\">\r\n\t\t\t\t<view @touchstart=\"handleTouchstart($event, index)\" @touchmove=\"handleTouchmove\"\r\n\t\t\t\t\t@touchend=\"handleTouchend\" :style=\"{'background': item}\" style=\"width: 100%; height: 100%;\">\r\n\t\t\t\t\t<!-- 自定义内容 -->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tstyle=\"display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;\">\r\n\t\t\t\t\t\t{{index + 1}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</template>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\t// 容器大小\r\n\t\t\tcontainerSize: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({\r\n\t\t\t\t\twdith: '100vw',\r\n\t\t\t\t\theight: '100vh'\r\n\t\t\t\t}),\r\n\t\t\t},\r\n\t\t\t// 控件的大小\r\n\t\t\tcontrolsSize: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({\r\n\t\t\t\t\twidth: 600,\r\n\t\t\t\t\theight: 100\r\n\t\t\t\t}),\r\n\t\t\t},\r\n\t\t\t// 数据列表\r\n\t\t\tcontrolsList: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 控件列表\r\n\t\t\t\tcontrolsArray: [],\r\n\t\t\t\t// 每行最大存放的个数\r\n\t\t\t\tmaxWidthCount: 1,\r\n\t\t\t\t// 控件的间距\r\n\t\t\t\tmargin: {\r\n\t\t\t\t\tmargin_x: 0,\r\n\t\t\t\t\tmargin_y: 10,\r\n\t\t\t\t},\r\n\t\t\t\t// 记录所有控件的初始位置\r\n\t\t\t\trecordInitControlsPoisitonList: [],\r\n\t\t\t\t// 控件的数据\r\n\t\t\t\tcontrolsPositionArray: [],\r\n\t\t\t\t// 记录当前手指的位置\r\n\t\t\t\trecordPosition: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t},\r\n\t\t\t\t// 记录当前操作的控件数据\r\n\t\t\t\trecordControlsPositionItem: {},\r\n\t\t\t\t// 当前操作的控件的下标\r\n\t\t\t\tcurretnControlsIndex: -1,\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 获取系统信息\r\n\t\t\tthis.systemInfo = uni.getSystemInfoSync();\r\n\t\t\t// 获取控件列表\r\n\t\t\tthis.controlsArray = this.controlsList;\r\n\r\n\t\t\t// 初始化控件的位置\r\n\t\t\tthis.controlsPositionArray = this.initControlsPosition();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/** 初始化各个控件的位置 */\r\n\t\t\tinitControlsPosition() {\r\n\t\t\t\t// 用于返回出去的新数组\r\n\t\t\t\tlet tempArray = [];\r\n\r\n\t\t\t\t// 设置控件位置\r\n\t\t\t\tfor (let i = 0, j = 0; i < this.controlsList.length; i++, j++) {\r\n\t\t\t\t\ttempArray[i] = {\r\n\t\t\t\t\t\tleft: this.margin.margin_x,\r\n\t\t\t\t\t\ttop: j * (this.controlsSize.height + this.margin.margin_y) + this.margin.margin_y,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 记录数据 - 进行深拷贝\r\n\t\t\t\tthis.recordInitControlsPoisitonList = [...tempArray];\r\n\t\t\t\t// 返回数据\r\n\t\t\t\treturn tempArray;\r\n\t\t\t},\r\n\r\n\t\t\t/** 处理手指触摸后移动 */\r\n\t\t\thandleTouchmove(event) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tpageX,\r\n\t\t\t\t\tpageY\r\n\t\t\t\t} = event.touches[0];\r\n\r\n\t\t\t\t// 获取移动的差\r\n\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex] = {\r\n\t\t\t\t\tleft: this.controlsPositionArray[this.curretnControlsIndex].left + (pageX - this.recordPosition.x),\r\n\t\t\t\t\ttop: this.controlsPositionArray[this.curretnControlsIndex].top + (pageY - this.recordPosition.y),\r\n\t\t\t\t}\r\n\t\t\t\t// 记录位置\r\n\t\t\t\tthis.recordPosition = {\r\n\t\t\t\t\tx: pageX,\r\n\t\t\t\t\ty: pageY\r\n\t\t\t\t};\r\n\t\t\t\t// 判断当前移动的位置是否需要进行排序\r\n\t\t\t\t// 向下移动\r\n\t\t\t\tif (this.curretnControlsIndex !== this.controlsPositionArray.length - 1 &&\r\n\t\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex].top >\r\n\t\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex + 1].top) {\r\n\t\t\t\t\t// 交换位置\r\n\t\t\t\t\tthis._handleChangeControlsPosition(0, this.curretnControlsIndex + 1);\r\n\t\t\t\t}\r\n\t\t\t\t// 向上移动\r\n\t\t\t\telse if (this.curretnControlsIndex !== 0 &&\r\n\t\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex].top <\r\n\t\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex - 1].top) {\r\n\t\t\t\t\t// 交换位置\r\n\t\t\t\t\tthis._handleChangeControlsPosition(0, this.curretnControlsIndex - 1);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/** 处理手指触摸开始事件 */\r\n\t\t\thandleTouchstart(event, index) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tpageX,\r\n\t\t\t\t\tpageY\r\n\t\t\t\t} = event.touches[0];\r\n\r\n\t\t\t\t// 记录一些数据\r\n\t\t\t\tthis.curretnControlsIndex = index;\r\n\t\t\t\tthis.recordPosition = {\r\n\t\t\t\t\tx: pageX,\r\n\t\t\t\t\ty: pageY\r\n\t\t\t\t};\r\n\t\t\t\tthis.recordControlsPositionItem = this.controlsPositionArray[index];\r\n\t\t\t},\r\n\r\n\t\t\t/** 处理手指松开事件 */\r\n\t\t\thandleTouchend(event) {\r\n\t\t\t\t// 将操控的控件归位\r\n\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex] = this.recordInitControlsPoisitonList[this\r\n\t\t\t\t\t.curretnControlsIndex];\r\n\t\t\t\tthis.curretnControlsIndex = -1;\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 处理交换控件位置的方法 - \r\n\t\t\t * @param {number} index\t需要与第几个下标交换位置\r\n\t\t\t * */\r\n\t\t\t_handleChangeControlsPosition(type, index) {\r\n\t\t\t\t// 记录当前操控的控件数据\r\n\t\t\t\tlet tempControls = this.controlsArray[this.curretnControlsIndex];\r\n\r\n\t\t\t\t// 设置原来位置的数据\r\n\t\t\t\tthis.controlsArray[this.curretnControlsIndex] = this.controlsArray[index];\r\n\t\t\t\t// 将临时存放的数据设置好\r\n\t\t\t\tthis.controlsArray[index] = tempControls;\r\n\r\n\t\t\t\t// 调整控件位置数据\r\n\t\t\t\tthis.controlsPositionArray[index] = this.controlsPositionArray[this.curretnControlsIndex];\r\n\t\t\t\tthis.controlsPositionArray[this.curretnControlsIndex] = this.recordControlsPositionItem;\r\n\r\n\t\t\t\t// 改变当前选中的位置\r\n\t\t\t\tthis.curretnControlsIndex = index;\r\n\r\n\t\t\t\t// 记录新位置的数据\r\n\t\t\t\tthis.recordControlsPositionItem = this.recordInitControlsPoisitonList[this.curretnControlsIndex];\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.drag-and-drop-sort-B {\r\n\t\tposition: relative;\r\n\r\n\r\n\t\t._item {\r\n\t\t\tposition: absolute;\r\n\t\t\tbackground-color: red;\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test.vue?vue&type=style&index=0&id=3e202046&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./test.vue?vue&type=style&index=0&id=3e202046&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1728968727889\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}